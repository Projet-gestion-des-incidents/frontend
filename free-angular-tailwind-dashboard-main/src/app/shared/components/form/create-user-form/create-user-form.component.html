<app-component-card title="Créer un nouvel utilisateur">
  <div class="space-y-8">
    
    <app-alert
      *ngIf="alert.show"
      [variant]="alert.variant"
      [title]="alert.title"
      [message]="alert.message"
      (click)="alert.show = false"
    ></app-alert>
<br>
    <form (ngSubmit)="onSubmit()" [formGroup]="userForm" class="space-y-6">
      
      <!-- Section 1 : Informations personnelles -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Prénom -->
        <div>
          <app-label for="prenom">Prénom <span class="text-error-500">*</span></app-label>
          <app-input-field
            type="text"
            id="prenom"
            placeholder="Jean"
            [value]="userForm.get('prenom')?.value"
            (valueChange)="userForm.get('prenom')?.setValue($event)"
          />
          <div *ngIf="userForm.get('prenom')?.touched && userForm.get('prenom')?.invalid" 
               class="text-error-500 text-sm mt-1">
            Le prénom est requis (min. 2 caractères)
          </div>
        </div>

        <!-- Nom -->
        <div>
          <app-label for="nom">Nom <span class="text-error-500">*</span></app-label>
          <app-input-field
            type="text"
            id="nom"
            placeholder="Dupont"
            [value]="userForm.get('nom')?.value"
            (valueChange)="userForm.get('nom')?.setValue($event)"
          />
          <div *ngIf="userForm.get('nom')?.touched && userForm.get('nom')?.invalid" 
               class="text-error-500 text-sm mt-1">
            Le nom est requis (min. 2 caractères)
          </div>
        </div>
      </div>

      <!-- Section 2 : Email & Role -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Email -->
        <div>
          <app-label for="email">Email <span class="text-error-500">*</span></app-label>
          <app-input-field
            type="email"
            id="email"
            placeholder="jean.dupont@example.com"
            [value]="userForm.get('email')?.value"
            (valueChange)="userForm.get('email')?.setValue($event)"
          />
          <div *ngIf="userForm.get('email')?.touched && userForm.get('email')?.invalid" 
               class="text-error-500 text-sm mt-1">
            Email invalide
          </div>
       
        </div>

      <div>
                    <!-- Rôle -->

          <app-label for="role">Rôle <span class="text-error-500">*</span></app-label>
          <app-select
              [options]="roleOptions"
            placeholder="Sélectionner un rôle"
            [value]="userForm.get('roleId')?.value"
            (valueChange)="userForm.get('roleId')?.setValue($event)"
            className="dark:bg-dark-900"
          ></app-select>
         
 
          <div *ngIf="userForm.get('roleId')?.touched && userForm.get('roleId')?.invalid" 
               class="text-error-500 text-sm mt-1">
            Le rôle est requis
          </div>
        </div>

      </div>
 

      <!-- Section 5 : Mot de passe -->
  

      <!-- Boutons -->
      <div class="flex justify-end space-x-4 pt-6 border-t dark:border-gray-700">
        <app-button
          type="button"
          variant="outline"
          (btnClick)="cancel()"
        >
          Annuler
        </app-button>
        <app-button
          type="submit"
          variant="primary"
          [disabled]="userForm.invalid || loading"
          (btnClick)="onSubmit()"  

        >
          {{ loading ? 'Création en cours...' : 'Créer l\'utilisateur' }}
        </app-button>
      </div>
    </form>
  </div>
</app-component-card>